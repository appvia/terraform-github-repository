#####################################################################################
# Example terraform.tfvars file
# Copy this file to terraform.tfvars and customize the values for your use case
#####################################################################################

# Repository Configuration
repository_name = "my-terraform-repository"

# Basic Collaborators
collaborators = [
  {
    username   = "john-doe"
    permission = "write"
  },
  {
    username   = "jane-smith"
    permission = "read"
  }
]

# Advanced Collaborators (for advanced repository)
advanced_collaborators = [
  {
    username   = "senior-dev-1"
    permission = "admin"
  },
  {
    username   = "senior-dev-2"
    permission = "admin"
  },
  {
    username   = "dev-1"
    permission = "write"
  },
  {
    username   = "dev-2"
    permission = "write"
  },
  {
    username   = "reviewer-1"
    permission = "read"
  }
]

# Branch Protection Rules
branch_protection = {
  main = {
    enforce_admins                  = true
    require_conversation_resolution = true
    require_signed_commits          = true

    required_status_checks = {
      strict = true
      checks = ["ci", "test", "security-scan"]
    }

    required_pull_request_reviews = {
      dismiss_stale_reviews           = true
      required_approving_review_count = 2
      dismissal_users                 = ["admin-user"]
      dismissal_teams                 = ["admin-team"]

      bypass_pull_request_allowances = {
        users = ["bot-user"]
        teams = ["bot-team"]
      }
    }
  }

  develop = {
    enforce_admins                  = true
    require_conversation_resolution = false
    require_signed_commits          = false

    required_pull_request_reviews = {
      dismiss_stale_reviews           = true
      required_approving_review_count = 1
    }
  }
}

# Environment Protection Rules
environments = {
  production = {
    prevent_self_review = true
    can_admins_bypass   = false
    reviewers = {
      users = ["senior-dev-1", "senior-dev-2"]
      teams = ["senior-developers"]
    }
  }

  staging = {
    prevent_self_review = false
    can_admins_bypass   = true
    reviewers = {
      users = ["dev-1", "dev-2"]
      teams = ["developers"]
    }
  }

  development = {
    prevent_self_review = false
    can_admins_bypass   = true
  }
}

# Template Configuration
use_template = true

# Note: When use_template is true, the template will be set to:
# template = {
#   owner                = "github"
#   repository           = "actions-starter-workflows"
#   include_all_branches = false
# }
